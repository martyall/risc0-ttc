use ttc_methods::{TRADE_ELF, TRADE_ID};
use risc0_zkvm::{
    default_prover,
    serde::{from_slice, to_vec},
    ExecutorEnv, Receipt,
};
use hex;


fn provably_ttc(input: &str) -> (String, Receipt) {
      let env = ExecutorEnv::builder()
        .add_input(&to_vec(input).unwrap())
        .build()
        .unwrap();

    let prover = default_prover();

    let receipt = prover.prove_elf(env, TRADE_ELF).unwrap();

    println!("Hello, world! I know the receipt factors of {:?}, and I can prove it!", receipt.journal);



    let res_hex = hex::encode(&receipt.journal);
    println!("Hello, world! I know the real factors of {:?}, and I can prove it!", res_hex);

    (res_hex, receipt)

}

fn main() {

    let log_str: &str =
        "000000000000000000000000000000000000000000000000000000000008b8ec000000000000000000000000000000000000000000000000000000000003297e000000000000000000000000000000000000000000000000000000000002e0c700000000000000000000000000000000000000000000000000000000000be507000000000000000000000000000000000000000000000000000000000009aea2000000000000000000000000000000000000000000000000000000000005985200000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001e0000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000003600000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000002e0c7000000000000000000000000000000000000000000000000000000000009aea200000000000000000000000000000000000000000000000000000000000be5070000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000002e0c7000000000000000000000000000000000000000000000000000000000008b8ec0000000000000000000000000000000000000000000000000000000000059852000000000000000000000000000000000000000000000000000000000003297e0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000002e0c7000000000000000000000000000000000000000000000000000000000003297e0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000008b8ec0000000000000000000000000000000000000000000000000000000000059852000000000000000000000000000000000000000000000000000000000009aea200000000000000000000000000000000000000000000000000000000000be5070000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000003297e000000000000000000000000000000000000000000000000000000000002e0c7000000000000000000000000000000000000000000000000000000000008b8ec0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000008b8ec000000000000000000000000000000000000000000000000000000000009aea200000000000000000000000000000000000000000000000000000000000be5070000000000000000000000000000000000000000000000000000000000059852";

    let (res, receipt) = provably_ttc(log_str);

    receipt.verify(TRADE_ID).unwrap();

    println!("Hello, world! I know the factors of {:?}, and I can prove it!", res);

    

}


/*
1111111111111111111111111111111111111111111111111111111111111111
c001000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
2000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0300000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
6000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
a000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000001000000
2000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000002000000e0000000
c700000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0300000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000008000000b8000000
ec00000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000009000000ae000000
a200000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000300000029000000
7e00000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000500000098000000
5200000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000b000000e5000000

07000000

*/
